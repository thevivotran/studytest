{% extends 'base.html' %}

{% block title %}Dataset Selection - Flashcard App{% endblock %}

{% block content %}
    <h2>Upload New Dataset</h2>
    <form method="post" action="{{ url_for('upload_file') }}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="dataset_name">Dataset Name:</label>
            <input type="text" id="dataset_name" name="dataset_name" required>
        </div>
        <div class="form-group">
            <label for="csv_file">Select CSV File:</label>
            <input type="file" id="csv_file" name="csv_file" accept=".csv" required>
            <small>(Format: question, correct_answer, choice1, choice2, choice3, choice4, [choice5] - no header)</small>
        </div>
        <button type="submit" class="btn">Upload Dataset</button>
    </form>

    <hr>

    <h2>Available Datasets</h2>
    {% if datasets %}
        <ul class="dataset-list">
            {% for dataset in datasets %}
                <li>
                    {# Learn Link #}
                    <a href="{{ url_for('learn_dataset', dataset_id=dataset.id) }}" class="dataset-name-link">{{ dataset.name }}</a>

                    {# Review Button - Added #}
                    {# Assuming the route name will be 'review_dataset' #}
                    <a href="{{ url_for('review_dataset', dataset_id=dataset.id) }}" class="btn btn-secondary btn-sm" style="margin-left: 10px;">Review Marked</a>

                    {# Delete Button Form #}
                    <form action="{{ url_for('delete_dataset', dataset_id=dataset.id) }}" method="POST" style="display:inline; margin-left: 5px;" onsubmit="return confirm('Are you sure you want to delete the dataset \'{{ dataset.name }}\'? This action cannot be undone.');">
                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No datasets available. Upload a CSV file to get started.</p>
    {% endif %}
{% endblock %}